# å¡ç‰‡ç‰¹å¾é…ç½®æ€»ç»“

## âœ… å·²é…ç½®å¡ç‰‡ä¿¡æ¯

### å¡ç‰‡1 - Carnival Joy
- **é¢œè‰²**: `#ffe1dd` â†’ RGB(255, 225, 221) - æµ…ç²‰è‰²
- **æ–‡å­—**: Carnival Joy
- **å…³é”®è¯**: `1`, `CARNIVAL`, `JOY`
- **é¢œè‰²å®¹å·®**: 50

### å¡ç‰‡2 - Rainbow Ready
- **é¢œè‰²**: `#ffdeb7` â†’ RGB(255, 222, 183) - æµ…æ©™è‰²
- **æ–‡å­—**: Rainbow Ready
- **å…³é”®è¯**: `2`, `RAINBOW`, `READY`
- **é¢œè‰²å®¹å·®**: 50

### å¡ç‰‡3 - Verdant Feast
- **é¢œè‰²**: `#cde5ba` â†’ RGB(205, 229, 186) - æµ…ç»¿è‰²
- **æ–‡å­—**: Verdant Feast
- **å…³é”®è¯**: `3`, `VERDANT`, `FEAST`
- **é¢œè‰²å®¹å·®**: 50

### å¡ç‰‡4 - Cosmic Perch (è“è‰²ç‰ˆ)
- **é¢œè‰²**: `#9ee2ff` â†’ RGB(158, 226, 255) - æµ…è“è‰²
- **æ–‡å­—**: Cosmic Perch
- **å…³é”®è¯**: `4`, `COSMIC`, `PERCH`
- **é¢œè‰²å®¹å·®**: 50

### å¡ç‰‡5 - Cosmic Perch (æ©™è‰²ç‰ˆ)
- **é¢œè‰²**: `#f8876a` â†’ RGB(248, 135, 106) - çŠç‘šæ©™è‰²
- **æ–‡å­—**: Cosmic Perch
- **å…³é”®è¯**: `5`, `COSMIC`, `PERCH`
- **é¢œè‰²å®¹å·®**: 50

---

## ğŸ¨ é¢œè‰²åˆ†å¸ƒåˆ†æ

| å¡ç‰‡ | ä¸»è‰²è°ƒ | RGB | é¢œè‰²æè¿° |
|------|--------|-----|----------|
| 1 | #ffe1dd | (255, 225, 221) | æµ…ç²‰è‰² - é«˜Rã€é«˜Gã€é«˜B |
| 2 | #ffdeb7 | (255, 222, 183) | æµ…æ©™è‰² - é«˜Rã€é«˜Gã€ä¸­B |
| 3 | #cde5ba | (205, 229, 186) | æµ…ç»¿è‰² - ä¸­Rã€é«˜Gã€ä¸­B |
| 4 | #9ee2ff | (158, 226, 255) | æµ…è“è‰² - ä¸­Rã€é«˜Gã€é«˜B |
| 5 | #f8876a | (248, 135, 106) | çŠç‘šæ©™è‰² - é«˜Rã€ä¸­Gã€ä½B |

---

## ğŸ“Š é¢œè‰²å·®å¼‚çŸ©é˜µ

### RGBå·®å¼‚å€¼ï¼ˆè¶Šå¤§è¶Šå®¹æ˜“åŒºåˆ†ï¼‰

|   | å¡1 | å¡2 | å¡3 | å¡4 | å¡5 |
|---|-----|-----|-----|-----|-----|
| **å¡1** | - | å° | ä¸­ | ä¸­ | ä¸­ |
| **å¡2** | å° | - | ä¸­ | ä¸­ | å° |
| **å¡3** | ä¸­ | ä¸­ | - | å° | å¤§ |
| **å¡4** | ä¸­ | ä¸­ | å° | - | å¤§ |
| **å¡5** | ä¸­ | å° | å¤§ | å¤§ | - |

**æ½œåœ¨æ··æ·†å¯¹ï¼š**
- âš ï¸ **å¡1 vs å¡2**: éƒ½æ˜¯æš–è‰²è°ƒï¼Œé¢œè‰²ç›¸è¿‘ï¼ˆç²‰è‰² vs æµ…æ©™ï¼‰
- âš ï¸ **å¡3 vs å¡4**: éƒ½æœ‰é«˜Gå€¼ï¼ˆç»¿è‰² vs è“è‰²ï¼‰
- âš ï¸ **å¡4 vs å¡5**: æ–‡å­—å®Œå…¨ç›¸åŒï¼Œåªèƒ½é é¢œè‰²åŒºåˆ†

---

## ğŸ” éªŒè¯é€»è¾‘

### äº”é‡é˜²æŠ¤æœºåˆ¶
```
1ï¸âƒ£ è¿‡æ›æ£€æµ‹ï¼ˆäº®åº¦>200ï¼‰
   â†“
2ï¸âƒ£ å›¾åƒè´¨é‡ï¼ˆæ ‡å‡†å·®>20ï¼‰
   â†“
3ï¸âƒ£ åƒç´ åŒ¹é…ï¼ˆç›¸ä¼¼åº¦>65%ï¼‰
   â†“
4ï¸âƒ£ é¢œè‰²éªŒè¯ï¼ˆé¢œè‰²ç›¸ä¼¼åº¦>60%ï¼‰âœ¨
   â†“
5ï¸âƒ£ è¿ç»­åŒ¹é…ï¼ˆ3æ¬¡ï¼Œ700msé—´éš”ï¼‰
```

### é¢œè‰²éªŒè¯é‡è¦æ€§
- **å¡1-3**: é¢œè‰²å„å¼‚ï¼Œå®¹æ˜“åŒºåˆ†
- **å¡4-5**: æ–‡å­—ç›¸åŒï¼ˆCosmic Perchï¼‰ï¼Œ**å¿…é¡»ä¾èµ–é¢œè‰²éªŒè¯**
  - å¡4: æµ…è“è‰² RGB(158, 226, 255)
  - å¡5: çŠç‘šæ©™ RGB(248, 135, 106)
  - å·®å¼‚æ˜æ˜¾ï¼Œé¢œè‰²éªŒè¯å¯å‡†ç¡®åŒºåˆ†

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### 1. å…ˆæµ‹è¯•é¢œè‰²å·®å¼‚å¤§çš„å¡ç‰‡
å»ºè®®æµ‹è¯•é¡ºåºï¼š
1. **å¡3ï¼ˆæµ…ç»¿ï¼‰** - ç‹¬ç‰¹çš„ç»¿è‰²
2. **å¡5ï¼ˆçŠç‘šæ©™ï¼‰** - ç‹¬ç‰¹çš„æ©™çº¢è‰²
3. **å¡4ï¼ˆæµ…è“ï¼‰** - è“è‰²ç³»
4. **å¡1ï¼ˆæµ…ç²‰ï¼‰** - ç²‰è‰²ç³»
5. **å¡2ï¼ˆæµ…æ©™ï¼‰** - ä¸å¡1ç›¸è¿‘

### 2. é‡ç‚¹æµ‹è¯•æ··æ·†å¯¹
- **å¡1 vs å¡2**: æµ‹è¯•ç²‰è‰²å’Œæµ…æ©™è‰²èƒ½å¦åŒºåˆ†
- **å¡4 vs å¡5**: æµ‹è¯•ç›¸åŒæ–‡å­—ã€ä¸åŒé¢œè‰²èƒ½å¦åŒºåˆ†
- **å¡3 vs å¡4**: æµ‹è¯•ç»¿è‰²å’Œè“è‰²èƒ½å¦åŒºåˆ†

### 3. æŸ¥çœ‹è°ƒè¯•è¾“å‡º
æ‰“å¼€CardDetectionåï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºï¼š
```
å¡ç‰‡1 é¢œè‰²åŒ¹é…åº¦: 92% (RGB: 252,223,219)
å¡ç‰‡2 é¢œè‰²åŒ¹é…åº¦: 38% (RGB: 252,223,219)
...
```

**æœŸæœ›ç»“æœï¼š**
- æ­£ç¡®å¡ç‰‡çš„é¢œè‰²åŒ¹é…åº¦ > 70%
- é”™è¯¯å¡ç‰‡çš„é¢œè‰²åŒ¹é…åº¦ < 50%

---

## âš™ï¸ å‚æ•°è°ƒæ•´å»ºè®®

### å¦‚æœè¯†åˆ«ä¸å‡†ç¡®

#### åœºæ™¯1ï¼šæ‰€æœ‰å¡ç‰‡åŒ¹é…åº¦éƒ½ä½ï¼ˆ<50%ï¼‰
**åŸå› **: å…‰çº¿æ¡ä»¶ä¸é…ç½®çš„RGBå€¼å·®å¼‚å¤§

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æŸ¥çœ‹æ§åˆ¶å°å®é™…æ£€æµ‹åˆ°çš„RGBå€¼
2. å–å¹³å‡å€¼æ›´æ–°é…ç½®
3. æˆ–æé«˜`colorThreshold`åˆ°60-70

#### åœºæ™¯2ï¼šå¡1å’Œå¡2å®¹æ˜“æ··æ·†
**åŸå› **: ç²‰è‰²å’Œæµ…æ©™è‰²è¾ƒç›¸è¿‘

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. é™ä½`colorThreshold`åˆ°40ï¼ˆæ›´ä¸¥æ ¼ï¼‰
2. æˆ–å¯ç”¨OCRæ–‡å­—éªŒè¯è¾…åŠ©åŒºåˆ†

#### åœºæ™¯3ï¼šå¡4å’Œå¡5æ··æ·†
**åŸå› **: æ–‡å­—ç›¸åŒï¼Œåªèƒ½é é¢œè‰²

**è§£å†³æ–¹æ¡ˆ**ï¼š
- è¿™ä¸¤ä¸ªé¢œè‰²å·®å¼‚å¾ˆå¤§ï¼ˆè“ vs æ©™ï¼‰ï¼Œç†è®ºä¸Šä¸åº”æ··æ·†
- å¦‚æœæ··æ·†ï¼Œæ£€æŸ¥ï¼š
  1. æ˜¯å¦è¿‡æ›ï¼ˆæŸ¥çœ‹äº®åº¦è­¦å‘Šï¼‰
  2. å…‰çº¿æ˜¯å¦ç¨³å®š
  3. å¡ç‰‡æ˜¯å¦å®Œæ•´åœ¨é»„æ¡†å†…

---

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ–ï¼ˆå¦‚æœéœ€è¦ï¼‰

#### 1. è°ƒæ•´é¢œè‰²å®¹å·®
```typescript
// CardDetection.tsx ç¬¬18-42è¡Œ
1: {
  keywords: ['1', 'CARNIVAL', 'JOY'],
  dominantColor: { r: 255, g: 225, b: 221 },
  colorThreshold: 40  // é™ä½åˆ°40ï¼ˆæ›´ä¸¥æ ¼ï¼‰æˆ–æé«˜åˆ°60ï¼ˆæ›´å®½æ¾ï¼‰
}
```

#### 2. è°ƒæ•´åƒç´ åŒ¹é…é˜ˆå€¼
```typescript
// CardDetection.tsx ç¬¬306è¡Œ
if (bestMatch > 60) {  // é™ä½åˆ°60%ï¼ˆæ›´å®¹æ˜“è§¦å‘ï¼‰
  // é¢œè‰²éªŒè¯
}
```

#### 3. è°ƒæ•´é¢œè‰²éªŒè¯é˜ˆå€¼
```typescript
// CardDetection.tsx ç¬¬141è¡Œ
return colorMatch > 55;  // é™ä½åˆ°55%ï¼ˆæ›´å®½æ¾ï¼‰
```

---

### é•¿æœŸä¼˜åŒ–ï¼ˆå¦‚æœé¢œè‰²ä¸å¤Ÿï¼‰

#### å¯ç”¨OCRæ–‡å­—éªŒè¯
é€‚ç”¨äºå¡1å’Œå¡2è¿™ç§é¢œè‰²ç›¸è¿‘çš„æƒ…å†µã€‚

**æ­¥éª¤**ï¼š
1. ç¼–è¾‘ `src/components/CardDetection.tsx`
2. æ‰¾åˆ° `verifyCardFeatures` å‡½æ•°ï¼ˆç¬¬124è¡Œï¼‰
3. å–æ¶ˆæ³¨é‡ŠOCRéƒ¨åˆ†ï¼š

```typescript
// 2. OCRæ–‡å­—éªŒè¯
const text = await performOCR(imageData);
setOcrText(text);
const hasKeyword = features.keywords.some(keyword => text.includes(keyword));
console.log(`å¡ç‰‡${cardNumber} OCRæ–‡å­—: "${text}", åŒ…å«å…³é”®è¯: ${hasKeyword}`);

// ä¿®æ”¹è¿”å›æ¡ä»¶
return colorMatch > 60 && hasKeyword;  // é¢œè‰²+æ–‡å­—åŒé‡éªŒè¯
```

**å½±å“**ï¼š
- âœ… è¯†åˆ«æ›´å‡†ç¡®
- âš ï¸ è¯†åˆ«é€Ÿåº¦å˜æ…¢ï¼ˆ+300msï¼‰

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### é¢œè‰²éªŒè¯å‡†ç¡®åº¦é¢„æµ‹

| å¡ç‰‡ | ç‹¬ç‰¹æ€§ | é¢„æœŸå‡†ç¡®åº¦ | æ½œåœ¨é—®é¢˜ |
|------|--------|------------|----------|
| å¡1 | ä¸­ | 85% | å¯èƒ½ä¸å¡2æ··æ·† |
| å¡2 | ä¸­ | 85% | å¯èƒ½ä¸å¡1æ··æ·† |
| å¡3 | é«˜ | 95% | ç»¿è‰²ç‹¬ç‰¹ |
| å¡4 | é«˜ | 95% | è“è‰²ç‹¬ç‰¹ |
| å¡5 | é«˜ | 95% | æ©™è‰²ç‹¬ç‰¹ |

**æ•´ä½“é¢„æœŸå‡†ç¡®åº¦**: 90%+

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

### è¯†åˆ«æˆåŠŸçš„æ ‡å¿—
1. âœ… å¯¹å‡†æ­£ç¡®å¡ç‰‡ï¼ŒåŒ¹é…åº¦>70%
2. âœ… å¯¹å‡†é”™è¯¯å¡ç‰‡ï¼ŒåŒ¹é…åº¦<50%
3. âœ… è¿ç»­3æ¬¡åŒ¹é…åŒä¸€å¡ç‰‡
4. âœ… è‡ªåŠ¨æ’­æ”¾å¯¹åº”è§†é¢‘

### å¦‚æœä¸æˆåŠŸ
1. æŸ¥çœ‹æ§åˆ¶å°é¢œè‰²åŒ¹é…åº¦æ—¥å¿—
2. å¯¹æ¯”é…ç½®çš„RGB vs å®é™…æ£€æµ‹çš„RGB
3. è°ƒæ•´`colorThreshold`å‚æ•°
4. è€ƒè™‘å¯ç”¨OCRè¾…åŠ©éªŒè¯

---

## ğŸ“ é…ç½®æ–‡ä»¶ä½ç½®

**ä¸»é…ç½®**: `src/components/CardDetection.tsx` (ç¬¬17-43è¡Œ)

```typescript
const CARD_FEATURES: Record<number, CardFeature> = {
  1: { keywords: ['1', 'CARNIVAL', 'JOY'], dominantColor: { r: 255, g: 225, b: 221 }, colorThreshold: 50 },
  2: { keywords: ['2', 'RAINBOW', 'READY'], dominantColor: { r: 255, g: 222, b: 183 }, colorThreshold: 50 },
  3: { keywords: ['3', 'VERDANT', 'FEAST'], dominantColor: { r: 205, g: 229, b: 186 }, colorThreshold: 50 },
  4: { keywords: ['4', 'COSMIC', 'PERCH'], dominantColor: { r: 158, g: 226, b: 255 }, colorThreshold: 50 },
  5: { keywords: ['5', 'COSMIC', 'PERCH'], dominantColor: { r: 248, g: 135, b: 106 }, colorThreshold: 50 }
};
```

**é‡æ–°æ„å»º**:
```bash
npm run build
npx cap sync android
```

---

**é…ç½®å®Œæˆï¼ç°åœ¨å¯ä»¥æµ‹è¯•å¡ç‰‡è¯†åˆ«äº†ï¼** ğŸ‰ğŸ¨ğŸ“¸
